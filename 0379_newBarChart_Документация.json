{
  "title": "newBarChart",
  "text": "Была ли статья полезной?\nДа\nНет\nСпасибо за вашу оценку!\nОставляя более подробный отзыв, вы помогаете нам улучшать документацию\nКомментарий к оценке\nКонтактная информация (необязательно)\nВложения\nДобавить файл\nОтменить\nОтправить\nnewBarChart\nФункция используется для построения диаграммы столбчатого сравнения (горизонтальной гистограммы).\nС этапами построения диаграммы можно ознакомиться в статье\n«Аналитическая панель \"Универсальный график\"»\n.\nСинтаксис\nnewBarChart\n( )\nПараметры функции отсутствуют.\nРабота с функцией предполагает заполнение\nполей экземпляра класса HighChart\n.\nПримечание\nДобавление функции в код алгоритма осуществляется с вкладки\n\"Графики\"\nпанели инструментов редактора алгоритмов.\nПри вызове функции осуществится вставка шаблона кода алгоритма, которую необходимо скорректировать по поставленной задаче.\nШаблон кода алгоритма для построения диаграммы столбчатого сравнения:\ndef\nchart :\n= newBarChart()\nchart.\ntitle :\n=\n\"Bar Chart Title\"\n//chart.setTitleStyle(Стиль форматирования по умолчанию для заголовка диаграммы универсального графика)\nchart.\nsubTitle :\n=\n\"Bar Chart Subtitle\"\n//chart.setSubTitleStyle(Стиль форматирования по умолчанию для подзаголовка диаграммы универсального графика)\nchart.xAxis.\ntitle :\n=\n\"Year\"\nchart.yAxis.\ntitle :\n=\n\"Quantity\"\nchart.setPalette(\n\"STANDARD_PALETTE\"\n)\nchart.setCyclicalPalette(\ntrue\n)\nchart.xAxis.categories.add(\n\"2021\"\n)\nchart.xAxis.categories.add(\n\"2022\"\n)\nchart.xAxis.categories.add(\n\"2023\"\n)\nchart.xAxis.categories.add(\n\"2024\"\n)\nchart.xAxis.categories.add(\n\"2025\"\n)\ndef\nserie :\n= newChartSerie()\nserie.\nname :\n=\n\"Serie 1\"\nserie.\nstack :\n=\n\"stack 1\"\ndef\nobjId :\n=\n1\nserie.values.add(newChartValue(\n1\n).setId(objId))\nserie.values.add(newChartValue(\n2\n).setId(objId))\nserie.values.add(newChartValue(\n3\n).setId(objId))\nserie.values.add(newChartValue(\n4\n).setId(objId))\nserie.values.add(newChartValue(\n5\n).setId(objId))\n/*objId is an optional parameter: use it for drill-down charts.\nobjId should contain object id.\nYou can use the add function without objId parameter instead of the addWithId function if you don't need this parameter\n*/\nchart.series.add(serie)\nserie :\n= newChartSerie()\nserie.\nname :\n=\n\"Serie 2\"\nserie.\nstack :\n=\n\"stack 1\"\nserie.values.add(newChartValue(\n2\n).setId(objId))\nserie.values.add(newChartValue(\n4\n).setId(objId))\nserie.values.add(newChartValue(\n9\n).setId(objId))\nserie.values.add(newChartValue(\n14\n).setId(objId))\nserie.values.add(newChartValue(\n22\n).setId(objId))\nchart.series.add(serie)\nserie :\n= newChartSerie()\nserie.\nname :\n=\n\"Serie 3\"\nserie.\nstack :\n=\n\"stack 2\"\nserie.values.add(newChartValue(\n3\n).setId(objId))\nserie.values.add(newChartValue(\n8\n).setId(objId))\nserie.values.add(newChartValue(\n14\n).setId(objId))\nserie.values.add(newChartValue(\n21\n).setId(objId))\nserie.values.add(newChartValue(\n30\n).setId(objId))\nchart.series.add(serie)\nserie :\n= newChartSerie()\nserie.\nname :\n=\n\"Serie 4\"\nserie.\nstack :\n=\n\"stack 2\"\nserie.values.add(newChartValue(\n4\n).setId(objId))\nserie.values.add(newChartValue(\n5\n).setId(objId))\nserie.values.add(newChartValue(\n6\n).setId(objId))\nserie.values.add(newChartValue(\n7\n).setId(objId))\nserie.values.add(newChartValue(\n8\n).setId(objId))\nchart.series.add(serie)\nchart.series.sort(\n\"ASC\"\n)\ndef\nmyPlotOpt :\n= newChartPlotOptions()\nmyPlotOpt.setNormalStacking()\nchart.\nplotOptions :\n= myPlotOpt\nchart.legend.\nenabled :\n=\ntrue\nchart\ngroovy\nCopied!\nПри вызове функции шаблон кода содержит методы для установки стиля заголовка и подзаголовка диаграммы с указанием наименования объекта справочника, используемого по умолчанию.\nДля того чтобы код оставался функциональным, данные строки кода в статье закомментированы.\nПри настройке стиля заголовка/подзаголовка следует при помощи функции\ndict\nвыбрать экземпляр типа, дочернего от типа \"Стили форматирования и подсказок\" [STYLES_DICTIONARY], например,\n\"Основной стиль форматирования\"\n.\nС описанием функций и методов, используемых при построении графика, можно ознакомиться в статье\n\"Настройка универсального графика\"\n.\nВ то же время серию (набор данных) горизонтальной диаграммы столбчатого сравнения можно задать одним из двух способов:\ndef serie := newChartSerie()\ndef serie := newColumnChartSerie()\nТакже при построении горизонтальной столбчатой диаграммы предполагается наличие осей, добавляемых при помощи полей:\nchart.xAxis.title – наименование вертикальной оси;\nchart.yAxis.title – наименование горизонтальной оси;\nchart.yAxis.categories.add(\"name\") – наименование категории, отображаемой по горизонтальной оси.\nКоторые задаются в следующем виде:\nchart.xAxis.\ntitle :\n=\n\"\"\nchart.yAxis.\ntitle :\n=\n\"Тоннаж поставок по итогам года\"\nchart.yAxis.categories.add(\n\"За 1 квартал\"\n)\nchart.yAxis.categories.add(\n\"За 2 квартал\"\n)\nchart.yAxis.categories.add(\n\"За 3 квартал\"\n)\nchart.yAxis.categories.add(\n\"За 4 квартал\"\n)\ngroovy\nCopied!\nМасштаб осей вычисляется автоматически.\nДля сравнения данных может быть использована диаграмма с накоплением или группировкой. Для этого реализованы следующие опции:\nдля накопления:\ndef\nPlotOpt :\n= newChartPlotOptions()\nPlotOpt.setNormalStacking()\nchart.\nplotOptions :\n= PlotOpt\ngroovy\nCopied!\nдля 100\n%\nнакопления:\ndef\nPlotOpt :\n= newChartPlotOptions()\nPlotOpt.setPercentStacking()\nchart.\nplotOptions :\n= PlotOpt\ngroovy\nCopied!\nдля группировки:\ndef\nPlotOpt :\n= newChartPlotOptions()\nPlotOpt.\ngrouping :\n=\nfalse\nchart.\nplotOptions :\n= PlotOpt\ngroovy\nCopied!\nПри работе с опцией группировки могут быть указаны следующие свойства серии:\nserie.id = \"main\" - идентификатор серии, относительно которой будет сдвиг столбца;\nserie.linkedTo := \"main\" - сдвиг последующих серий относительно серии с указанным идентификатором;\nserie.pointPlacement := -0.1 - размер сдвига столбца;\nПри одновременном использовании данных свойств на диаграмме будет сформирована одна серия - серия столбца, относительно которого сдвигаются сгруппированные столбцы.\nдля показа лейблов серии на столбце:\ndef\nDataLab :\n= newChartDataLabels(\ntrue\n,\ntrue\n)\nserie.\nDataLabels :\n= DataLab\ngroovy\nCopied!\nили\ndef\nDataLab :\n= newChartDataLabels()\nDataLab.\nenabled :\n=\ntrue\nDataLab.\ninside :\n=\ntrue\nserie.\ndataLabels :\n= DataLab\ngroovy\nCopied!\nПри написании кода опция применяется в рамках той серии, значение которой необходимо отобразить на столбце.\nПример\nНеобходимо продемонстрировать объём поставок топлива для сравнительного анализа по трём городам за 4 квартала. Для этого может быть использован следующий алгоритм:\n//Создание диаграммы столбчатого сравнения\ndef chart := newBarChart()\n//Добавление заголовка и подзаголовка графика\nchart.title := \"Бар диаграмма\"\nchart.subTitle := \"Фактический объем поставок в тоннах\"\n//Наименование осей\nchart.xAxis.title := \"Тоннаж поставок по итогам года\"\nchart.yAxis.title := \"\"\n//Добавление наименований категории, отображаемых по оси Y\nfor(def k := 1; k < 5; k := k + 1) {\nchart.yAxis.categories.add(\"За \" + k + \" квартал\")\n}\n//Для добавления в график нескольких наборов данных можно использовать один идентификатор. Cоздание первой серии\ndef serie := newChartSerie()\n//Наименование серии\nserie.name := \"Новосибирск\"\n//Цвет серии\nserie.color := \"#FF0000\"\n//Добавление значений серии\nserie.values.add(18)\nserie.values.add(27)\nserie.values.add(32)\nserie.values.add(16)\n//Добавление серии к диаграмме\nchart.series.add(serie)\n//Добавление второй серии, параметры задаются по аналогии с первой серией\nserie := newChartSerie()\nserie.name := \"Екатеринбург\"\nserie.values.add(11)\nserie.values.add(20)\nserie.values.add(35)\nserie.values.add(27)\nchart.series.add(serie)\n//Добавление третьей серии, параметры задаются по аналогии с первой серией\nserie := newChartSerie()\nserie.name := \"Владивосток\"\nserie.values.add(3)\nserie.values.add(7)\nserie.values.add(21)\nserie.values.add(39)\nchart.series.add(serie)\n//Возврат заданной диаграммы\nchart\nДанный алгоритм генерирует содержимое\nаналитической панели \"Универсальный график\"\n.\nАлгоритм написан при помощи функции\nnewBarChart\n,шаблон кода которой был отредактирован в рамках поставленной задачи.\nНаименования категории, отображаемых по оси Y, заданы с применением функции\nfor\n.\nБар диаграмма на основе данного алгоритма примет следующий вид:\nПри наведении курсора мыши на столбик серии происходит демонстрация поясняющей плашки с притусклением столбиков неактивных серий:\nДля отключения отображения данных серии на графике необходимо нажать на наименование серии:\nДиаграмма с накоплением примет следующий вид:\nДля этого в алгоритм следует добавить соответствующую опцию.\ndef chart := newBarChart()\nchart.title := \"Бар диаграмма\"\nchart.subTitle := \"Фактический объем поставок в тоннах\"\nchart.xAxis.title := \"\"\nchart.yAxis.title := \"Тоннаж поставок по итогам года\"\nfor(def k := 1; k < 5; k := k + 1) {\nchart.xAxis.categories.add(\"За \" + k + \" квартал\")\n}\n// Накопление данных\ndef myPlotOpt := newChartPlotOptions()\nmyPlotOpt.setNormalStacking()\nchart.plotOptions := myPlotOpt\ndef serie := newColumnChartSerie()\nserie.name := \"Новосибирск\"\nserie.color := \"#FF0000\"\nserie.values.add(18)\nserie.values.add(27)\nserie.values.add(32)\nserie.values.add(16)\nchart.series.add(serie)\nserie := newColumnChartSerie()\nserie.name := \"Екатеринбург\"\nserie.values.add(11)\nserie.values.add(20)\nserie.values.add(35)\nserie.values.add(27)\nchart.series.add(serie)\nserie := newColumnChartSerie()\nserie.name := \"Владивосток\"\nserie.values.add(3)\nserie.values.add(7)\nserie.values.add(21)\nserie.values.add(39)\nchart.series.add(serie)\nchart\nДиаграмма со 100% накоплением примет следующий вид:\nДля этого в алгоритм следует добавить соответствующую опцию.\ndef chart := newBarChart()\nchart.title := \"Бар диаграмма\"\nchart.subTitle := \"Фактический объем поставок в тоннах\"\nchart.xAxis.title := \"\"\nchart.yAxis.title := \"Тоннаж поставок по итогам года\"\nfor(def k := 1; k < 5; k := k + 1) {\nchart.xAxis.categories.add(\"За \" + k + \" квартал\")\n}\n// 100% накопление данных\ndef myPlotOpt := newChartPlotOptions()\nmyPlotOpt.setPercentStacking()\nchart.plotOptions := myPlotOpt\ndef serie := newColumnChartSerie()\nserie.name := \"Новосибирск\"\nserie.color := \"#FF0000\"\nserie.values.add(18)\nserie.values.add(27)\nserie.values.add(32)\nserie.values.add(16)\nchart.series.add(serie)\nserie := newColumnChartSerie()\nserie.name := \"Екатеринбург\"\nserie.values.add(11)\nserie.values.add(20)\nserie.values.add(35)\nserie.values.add(27)\nchart.series.add(serie)\nserie := newColumnChartSerie()\nserie.name := \"Владивосток\"\nserie.values.add(3)\nserie.values.add(7)\nserie.values.add(21)\nserie.values.add(39)\nchart.series.add(serie)\nchart\nДиаграмма с группировкой может иметь следующий вид:\nДля этого в алгоритм следует добавить соответствующую опцию.\ndef chart := newBarChart()\nchart.title := \"Бар диаграмма\"\nchart.subTitle := \"Фактический объем поставок в тоннах\"\nchart.xAxis.title := \"\"\nchart.yAxis.title := \"Тоннаж поставок по итогам года\"\nfor(def k := 1; k < 5; k := k + 1) {\nchart.xAxis.categories.add(\"За \" + k + \" квартал\")\n}\n// Группировка данных\ndef plotOpt := newChartPlotOptions()\nplotOpt.grouping := false\nchart.plotOptions := plotOpt\ndef serie := newColumnChartSerie()\nserie.name := \"Новосибирск\"\nserie.color := \"#FF0000\"\nserie.values.add(18)\nserie.values.add(27)\nserie.values.add(32)\nserie.values.add(16)\nchart.series.add(serie)\nserie := newColumnChartSerie()\nserie.name := \"Екатеринбург\"\nserie.values.add(11)\nserie.values.add(20)\nserie.values.add(35)\nserie.values.add(27)\nchart.series.add(serie)\nserie := newColumnChartSerie()\nserie.name := \"Владивосток\"\nserie.values.add(3)\nserie.values.add(7)\nserie.values.add(21)\nserie.values.add(39)\nchart.series.add(serie)\nchart",
  "source": "https://docs.greendata.ru/platform/ru/newbarchart.html"
}